"use strict";var ESC_KEYCODE=27,hideClass="visually-hidden",body=document.querySelector("body"),popupForm=document.querySelector(".popup"),nameFocus=popupForm.querySelector("input[name=name]"),closeFormButton=popupForm.querySelector(".feedback-form__close"),mainButtonForForm=document.querySelector(".header__button"),scrollDenaiedStyle="position: fixed; overflow: hidden;",scrollNormalStyle="position: static; overflow: auto;",mobileMaxWidth="(max-width: 767px)",toggleSecitons=document.querySelectorAll(".toggle-section"),classPictureClose=".toggle-section__toggle-close",classPictureOpen=".toggle-section__toggle-open",classSectionText=".toggle-section__text",classButton=".toggle-section__toggle",anchors=[].slice.call(document.querySelectorAll('a[href*="#"]')),animationTime=300,framesCount=20;function deactivateForm(){popupForm.classList.add(hideClass),nameFocus.blur(),body.style=scrollNormalStyle,closeFormButton.removeEventListener("click",deactivateForm),document.removeEventListener("keydown",onEscPress)}function onEscPress(e){e.keyCode===ESC_KEYCODE&&deactivateForm()}function hideForm(){popupForm.addEventListener("click",function(e){e.target!==closeFormButton&&e.target!==popupForm||deactivateForm()}),document.addEventListener("keydown",onEscPress)}function activateForm(){popupForm&&(nameFocus.focus(),popupForm.classList.contains(hideClass)&&popupForm.classList.remove(hideClass),window.scrollTo(pageXOffset,0),body.style=scrollDenaiedStyle,hideForm())}function hideSection(e,t,o){e&&(e.classList.add(hideClass),o&&o.classList.remove(hideClass),t&&t.classList.add(hideClass))}function showSection(e,t,o){e&&(e.classList.remove(hideClass),o&&o.classList.add(hideClass),t&&t.classList.add(hideClass))}function toggleFooterSectionContent(e){var t=e.querySelector(classPictureOpen),o=e.querySelector(classPictureClose),s=e.nextElementSibling;initToogles(s),s&&(s.classList.contains(hideClass)?(s.classList.remove(hideClass),o&&o.classList.add(hideClass),t&&t.classList.remove(hideClass)):(s.classList.add(hideClass),o&&o.classList.remove(hideClass),t&&t.classList.add(hideClass)))}function setEvent(e){return toggleFooterSectionContent(e.currentTarget)}function initToogles(e){for(var t=0;t<toggleSecitons.length;t++){var o=toggleSecitons[t],s=o.querySelector(classSectionText);if(e!==s){var i=o.querySelector(classPictureOpen),n=o.querySelector(classPictureClose),c=o.querySelector(classButton);window.matchMedia(mobileMaxWidth).matches?(hideSection(s,i,n),c.addEventListener("click",setEvent)):(showSection(s,i,n),c.removeEventListener("click",setEvent))}}}anchors.forEach(function(s){s.addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(s.getAttribute("href")).getBoundingClientRect().top+window.pageYOffset,o=setInterval(function(){var e=t/framesCount;e>window.pageYOffset-t&&window.innerHeight+window.pageYOffset<document.body.offsetHeight?window.scrollBy(0,e):(window.scrollTo(0,t),clearInterval(o))},animationTime/framesCount)})}),initToogles(),window.addEventListener("resize",initToogles),mainButtonForForm.addEventListener("click",activateForm);