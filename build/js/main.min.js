"use strict";var ESC_KEYCODE=27,hideClass="visually-hidden",mobileMaxWidth="(max-width: 767px)",secitons=document.querySelectorAll(".toggle-section"),classSection=".toggle-section",sectionsClose="toggle-section--close",sectionsOpen="toggle-section--open",classButton=".toggle-section__toggle",classSectionText=".toggle-section__text",body=document.querySelector("body"),popupForm=document.querySelector(".popup"),nameFocus=popupForm.querySelector("input[name=name]"),closeFormButton=popupForm.querySelector(".popup-feedback__close"),mainButtonForForm=document.querySelector(".header__button"),scrollDenaiedStyle="overflow: hidden;",scrollNormalStyle="overflow: auto;",anchors=[].slice.call(document.querySelectorAll('a[href*="#"]')),animationTime=300,framesCount=20;function deactivateForm(){popupForm.classList.add(hideClass),nameFocus.blur(),body.style=scrollNormalStyle,closeFormButton.removeEventListener("click",deactivateForm),document.removeEventListener("keydown",onEscPress)}function onEscPress(e){e.keyCode===ESC_KEYCODE&&deactivateForm()}function hideForm(){popupForm.addEventListener("click",function(e){e.target!==closeFormButton&&e.target!==popupForm||deactivateForm()}),document.addEventListener("keydown",onEscPress)}function activateForm(){popupForm&&(nameFocus.focus(),popupForm.classList.contains(hideClass)&&popupForm.classList.remove(hideClass),window.scrollTo(pageXOffset,0),body.style=scrollDenaiedStyle,hideForm())}function closeAllAccordeons(){secitons&&secitons.forEach(function(e){e.classList.add(sectionsClose),e.classList.remove(sectionsOpen)})}function toggleAccordeon(e){e.classList.toggle(sectionsClose),e.classList.toggle(sectionsOpen)}function onAccorderonHeadClick(e){var o=e.currentTarget.closest(classSection);o.classList.contains(sectionsClose)&&closeAllAccordeons(),toggleAccordeon(o)}function initToggles(){secitons.forEach(function(e){var o=e.querySelector(classButton);window.matchMedia(mobileMaxWidth).matches?(o.addEventListener("click",onAccorderonHeadClick),e.classList.add(sectionsClose)):(o.removeEventListener("click",onAccorderonHeadClick),e.classList.remove(sectionsClose),e.classList.remove(sectionsOpen))})}anchors.forEach(function(s){s.addEventListener("click",function(e){e.preventDefault();var o=document.querySelector(s.getAttribute("href")).getBoundingClientRect().top+window.pageYOffset,t=setInterval(function(){var e=o/framesCount;e>window.pageYOffset-o&&window.innerHeight+window.pageYOffset<document.body.offsetHeight?window.scrollBy(0,e):(window.scrollTo(0,o),clearInterval(t))},animationTime/framesCount)})}),initToggles(),window.addEventListener("resize",initToggles),mainButtonForForm.addEventListener("click",activateForm);